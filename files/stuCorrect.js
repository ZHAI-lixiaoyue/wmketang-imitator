angular.services.service("stuCorrect",["user","request","$requestCP","serviceManager","requestTF",function(e,a,i,t,n){t.addService(this);var o=this;o.record={},o.isRefreshRecord=!1,o.clearCache=function(){o.record={},o.examItem={}},o.getRecord=function(a,t,n){a.ssk=e.user.childS.ktinfo.ssk,i.jsonp("stuScanExam/list",a,(function(e){t(e)}),(function(e){n(e)}))},o.clearRecord=function(){o.record={}},o.getExamDetail=function(e,i,t,n){var o={aeid:e};n&&(o.uid=n),a.jsonp("exam/detail",o,(function(e){i&&i(e)}),(function(e){t&&t(e)}))},o.getExamDetailTopic_2=function(a,i,t,r){var s={answerExamID:a,ssk:e.user.childS.ktinfo.ssk};r&&(s.uid=r),n.jsonp("evaluation/getAnswerExamDetail",s,(function(e){o.examDetail=e.data.detail,i&&i(e)}),(function(e){t&&t(e)}))},o.getExamDetailTopic=function(e,i,t,n,r){var s={_host:appConf.DS2_HOST,aeid:e,sceneID:r};n&&(s.uid=n),a.jsonp("exam/answerExamSituation",s,(function(e){var a,t,n,r;o.examDetail=e.data,e.data.detail=e.data,e.data&&(e.data.exerNoList=(a=e.data,t=[],n=0,r=0,a.topic.forEach((function(e){var a=0;t.push(e),e.exercises_bak=[],e&&e.exercises&&e.exercises.forEach((function(i,t){var o;1==i.hideExerNo?(i.item.forEach((function(i,t){i.exerIndex=n,i.itemIndex=t,e.exercises_bak.push(i),a++})),i.title_bak=((o=i.item)[0].exerNo||"--")+"~"+(o[o.length-1].exerNo||"--")):(i.exerIndex=n,e.exercises_bak.push(i),i.title_bak=i.exerNo||"--",a++),n++})),e.exerNum=a,r+=a})),a.exerTotal=r,console.log(t),t)),i&&i(e)}),(function(e){t&&t(e)}))},o.getExerciseDetail=function(e,i,t){var n="",o={_host:appConf.DS2_HOST};e.uid&&(o.uid=e.uid),e.type?(n="exam/answerExercise",o.aqid=e.id||e.aqid,o._host=appConf.DS2_HOST):(n="exam/getExercise",o.exid=e.id||e.eid,o.examID=e.examID),a.jsonp(n,o,(function(e){i&&i(e)}),(function(e){t&&t(e)}))}}]);