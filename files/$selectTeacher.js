angular.services.factory("$selectTeacher",["$request","$ionicModal","prompt","$ionicPlatform",function(e,a,c,o){return function(t){var n=t.scope||{};n.classList=[],n.teacherComplete=!1,a.fromTemplateUrl("page/selectTeacher.html",angular.extend({animation:"slide-in-right"},t)).then((function(e){e.show(),n.teacherModal=e})),e.jsonp("class/getClassTeacher",{},(function(e){n.teacherComplete=!0,e.data&&(n.classList=e.data.class||[])}),(function(e){c.showTip(e.msg)})),n.closeTeacher=function(){s(),n.teacherModal.remove()};var s=o.registerBackButtonAction((function(){n.teacherModal.remove(),s()}),500);n.selectTeacher=function(e,a){n.teacherId=a,n.classId=e},n.confirmTeacher=function(){if(!n.teacherId)return c.showTip("未选择老师！");c.loading.show(),e.jsonp("class/sendToTeacher",{uid:n.teacherId,classId:n.classId,aeid:t.aeid,_host:appConf.IAS_HOST},(function(){c.loading.hide(),c.showTip("发送成功"),n.teacherModal.remove(),n.back()}),(function(e){c.loading.hide(),c.showTip(e.msg)}))}}}]);